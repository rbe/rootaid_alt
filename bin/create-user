#!/bin/bash

set -o nounset

USER=$1
USER_HOME=/home/${USER}

adduser --home ${USER_HOME} --disabled-password --gecos "Webhosting ${USER}" ${USER}

mkdir ${USER_HOME}/.ssh
mkdir -p ${USER_HOME}/apache/conf
mkdir -p ${USER_HOME}/apache/sites
mkdir -p ${USER_HOME}/apache/log
mkdir -p ${USER_HOME}/apache/ssl

chmod o-r ${USER_HOME}
chmod -R go= ${USER_HOME}/.ssh
chown -R ${USER} ${USER_HOME}

chown root:root ${USER_HOME}
chown root:root ${USER_HOME}/apache
chown root:root ${USER_HOME}/apache/sites

exit 0
