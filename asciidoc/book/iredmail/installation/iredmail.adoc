[Setup iRedMail]
== Setup iRedMail

* http://www.iredmail.org/docs/iredadmin-pro.releases.html[iRedAdmin Pro Releases]
* http://www.iredmail.org/docs/install.iredmail.on.debian.ubuntu.html[Install iRedMail on Debian]
* http://www.iredmail.org/docs/install.iredadmin.on.debian.html[Install iRedAdmin on Debian]
* http://www.iredmail.org/docs/migrate.or.upgrade.iredadmin.html[Migrate or Upgrade iRedAdmin]

=== Setup

[source,bash,linenums]
.Install needed tools
----
apt-get install -y ldapvi
----

[source,bash,linenums]
.Setup alias in root's ~/.bashrc
----
alias mx-ldapvi='ldapvi -h ldapi:/// -D cn=Manager,dc=1ci,dc=net -b dc=1ci,dc=net'
----

[source,bash,linenums]
.Download iRedMail
----
IREDMAIL_VER=0.9.4
mkdir /root/install
cd /root/install
curl -LO https://bitbucket.org/zhb/iredmail/downloads/iRedMail-${IREDMAL_VER}.tar.bz2
tar xjf iRedMail-${IREDMAIL_VER}.tar.bz2
----

[source,bash,linenums]
.Install iRedMail
----
cd /root/install/iRedMail-0.9.4
bash iRedMail.sh
----

=== iRedMail Installation Overview

See `/root/install/iRedMail-0.9.4/iRedMail.tips` for a detailed installation log of iRedMail.

[cols="2",options="header"]
.Services
|====
| Service
| URL

2+^| *Admin*

| iRedMail Admin
| https://mx.1ci.net/iredadmin/

| Awstats
| https://mx.1ci.net/awstats/

2+^| *User*

| Roundcube
| https://mx.1ci.net/mail/

| SOGo
| https://mx.1ci.net/SOGo/
|====

[cols="2",options="header"]
.Configuration and data
|====
| Service
| Configuration, Data, Log files

| SSL Certificates
| /etc/ssl/certs/mx.1ci.net.crt +
  /etc/ssl/certs/mx.1ci.net.ca-bundle +
  /etc/ssl/private/mx.1ci.net.key

2+^| *Web Server*

| Apache Web Server
| Configuration: /etc/apache2

| PHP 5
| Configuration: /etc/php5/apache2/php.ini

2+^| *Database, Backend*

| OpenLDAP
| Configuration: /etc/ldap, +
  Data: /var/lib/ldap

| MySQL
| Configuration: /etc/mysql

2+^| *SMTP*

| Postfix
| Configuration: /etc/postfix, +
  Data: /var/spool/postfix, +
  Log: /var/log/mail.log

2+^| *SMTP: Anti Spam / Virus*

| Amavisd-new
| Configuration: /etc/amavis/conf.d/50-user, +
  /etc/postfix/master.cf, +
  /etc/postfix/main.cf

| ClamAV
| Configuration: /etc/clamav, +
  Log: /var/log/clamav

| SpamAssassin
| Configuration: /etc/spamassassin

2+^| *POP3/IMAP*

| Dovecot
| Configuration: /etc/dovecot, +
  /var/vmail/sieve, +
  Log: /var/log

| Mail Storage
| Data: /var/vmail/vmail1 +
  Backup scripts and copies: /var/vmail/backup

2+^| *Admin*

| iRedMail Admin
| Configuration: /opt/iredapd/settings.py

| Awstats
| Configuration: /etc/awstats

| Roundcube
| Configuration: /opt/www/roundcubemail-1.1.4/config/*.inc.php

| SOGo
| Configuration: /etc/sogo/sogo.conf, +
  /etc/sogo/sogo.cred
|====
