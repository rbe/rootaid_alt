== Setup Linux

=== Login to your new system

.Option 1: Put your own SSH public key on your new server
[source,bash,linenums]
----
ssh root@<new server>
(enter password)
cd /root
mkdir .ssh
cat >.ssh/authorized_keys
<paste your SSH public key here>
<and press RETURN Ctrl-D>
chmod -R go= .ssh
----

.Option 2: Put your own SSH public key on your new server
[source,bash,linenums]
-----
cat $HOME/.ssh/id_rsa.pub | ssh root@<new server> \
    "mkdir .ssh ; cat >.ssh/authorized_keys ; chmod -R go= .ssh"
(enter password)
-----

=== Basics

TIP: All scripts described here can be run in correct order by calling `setup-rootaid`

.Hostname and mailname
[source,bash,linenums]
----
include::{bindir}/setup-host[]
----

.Language settings
[source,bash,linenums]
----
include::{bindir}/setup-language[]
----

.Timezone settings
[source,bash,linenums]
----
include::{bindir}/setup-timezone[]
----

.Some system tools
[source,bash,linenums]
----
include::{bindir}/install-system-tools[]
----

==== SSH

.Key exchange algorithms in /etc/ssh/sshd_config
[source,bash,linenums]
----
KexAlgorithms curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1
----

=== OpenSSL

.Instal OpenSSL
[source,bash,linenums]
----
include::{bindir}/install-openssl[]
----

=== MySQL

.MySQL server and client
[source,bash,linenums]
----
include::{bindir}/install-mysql[]
----

You need to enter a MySQL root password.

=== Apache

.Install Apache 2 web server
[source,bash,linenums]
----
include::{bindir}/install-apache2[]
----

=== PHP

.Install PHP5 for Apache 2
[source,bash,linenums]
----
include::{bindir}/install-apache2-php5[]
----

This will switch Apache's threading model to `prefork`.

=== Google PageSpeed

.Install Google PageSpeed for Apache 2
[source,bash,linenums]
----
include::{bindir}/install-apache2-modpagespeed[]
----
